{
  "strategy": "zero_shot",
  "prompt_prefix": "CREATE TABLE Building (\n    id BIGINT PRIMARY KEY,\n    occupant_gender CHAR(1) NOT NULL\n);\n\nCREATE TABLE Bedspace (\n    id BIGINT PRIMARY KEY,\n    building_id BIGINT NOT NULL,\n    apartment SMALLINT NOT NULL,\n    room TINYINT NOT NULL,\n    bed CHAR(1) NOT NULL,\n    FOREIGN KEY (building_id) REFERENCES Building(id)\n);\n\nCREATE TABLE Camp (\n    id BIGINT PRIMARY KEY,\n    name VARCHAR(255) NOT NULL\n);\n\nCREATE TABLE Person (\n    id BIGINT PRIMARY KEY,\n    first_name VARCHAR(255) NOT NULL,\n    last_name VARCHAR(255) NOT NULL,\n    birthdate DATE NOT NULL,\n    gender CHAR(1) NOT NULL,\n    bedspace_id BIGINT NOT NULL,\n    FOREIGN KEY (bedspace_id) REFERENCES Bedspace(id)\n);\n\nCREATE TABLE Employee (\n    id BIGINT PRIMARY KEY,\n    role_type TEXT NOT NULL CHECK (role_type IN ('HA', 'CA')),\n    keyset_id BIGINT NOT NULL,\n    FOREIGN KEY (id) REFERENCES Person(id)\n);\n\nCREATE TABLE Guest (\n    id BIGINT PRIMARY KEY,\n    camp_id BIGINT NOT NULL,\n    arrival_date DATE NOT NULL,\n    departure_date DATE NOT NULL,\n    checked_in INTEGER NOT NULL CHECK (checked_in IN (0, 1)),\n    FOREIGN KEY (id) REFERENCES Person(id),\n    FOREIGN KEY (camp_id) REFERENCES Camp(id)\n);\n\nCREATE TABLE Counselor (\n    id BIGINT PRIMARY KEY,\n    role_type TEXT NOT NULL CHECK (role_type IN ('Counselor', 'Assistant Coordinator', 'Coordinator', 'Medical Coordinator')),\n    FOREIGN KEY (id) REFERENCES Guest(id)\n);\n\nCREATE TABLE Participant (\n    id BIGINT PRIMARY KEY,\n    counselor_id BIGINT NOT NULL,\n    FOREIGN KEY (id) REFERENCES Guest(id),\n    FOREIGN KEY (counselor_id) REFERENCES Counselor(id)\n);\n",
  "questions": [
    {
      "question": "What is the average age of all people staying in the dorms?",
      "sql_raw_response": "SELECT AVG((julianday('now') - julianday(birthdate)) / 365.25) AS average_age\nFROM Person;",
      "sql_extracted": "SELECT AVG((julianday('now') - julianday(birthdate)) / 365.25) AS average_age\nFROM Person;",
      "query_result": [
        {
          "average_age": 19.1145575998803
        }
      ],
      "friendly_response": "The average age of all people staying in the dorms is about 19.11 years.",
      "error": "None"
    },
    {
      "question": "How many participants are participating in FSY 1A?",
      "sql_raw_response": "SELECT COUNT(*)\nFROM Participant p\nJOIN Guest g ON p.id = g.id\nJOIN Camp c ON g.camp_id = c.id\nWHERE c.name = 'FSY 1A';",
      "sql_extracted": "SELECT COUNT(*)\nFROM Participant p\nJOIN Guest g ON p.id = g.id\nJOIN Camp c ON g.camp_id = c.id\nWHERE c.name = 'FSY 1A';",
      "query_result": [
        {
          "COUNT(*)": 24
        }
      ],
      "friendly_response": "There are 24 participants in FSY 1A.",
      "error": "None"
    },
    {
      "question": "In which buildings are medical coordinators housed?",
      "sql_raw_response": "```sql\nSELECT DISTINCT b.id\nFROM Building b\nJOIN Bedspace bs ON bs.building_id = b.id\nJOIN Person p ON p.bedspace_id = bs.id\nJOIN Guest g ON g.id = p.id\nJOIN Counselor c ON c.id = g.id\nWHERE c.role_type = 'Medical Coordinator';\n```",
      "sql_extracted": "SELECT DISTINCT b.id\nFROM Building b\nJOIN Bedspace bs ON bs.building_id = b.id\nJOIN Person p ON p.bedspace_id = bs.id\nJOIN Guest g ON g.id = p.id\nJOIN Counselor c ON c.id = g.id\nWHERE c.role_type = 'Medical Coordinator';",
      "query_result": [
        {
          "id": 3
        },
        {
          "id": 7
        }
      ],
      "friendly_response": "Medical coordinators are housed in buildings with IDs 3 and 7.",
      "error": "None"
    },
    {
      "question": "What is the most common birth year of male participants?",
      "sql_raw_response": "```sql\nSELECT strftime('%Y', birthdate) AS birth_year, COUNT(*) AS count\nFROM Person p\nJOIN Participant pa ON p.id = pa.id\nWHERE p.gender = 'M'\nGROUP BY birth_year\nORDER BY count DESC\nLIMIT 1;\n```",
      "sql_extracted": "SELECT strftime('%Y', birthdate) AS birth_year, COUNT(*) AS count\nFROM Person p\nJOIN Participant pa ON p.id = pa.id\nWHERE p.gender = 'M'\nGROUP BY birth_year\nORDER BY count DESC\nLIMIT 1;",
      "query_result": [
        {
          "birth_year": "2011",
          "count": 8
        }
      ],
      "friendly_response": "The most common birth year of male participants is 2011.",
      "error": "None"
    },
    {
      "question": "Which counselors have the most participants assigned to them?",
      "sql_raw_response": "SELECT Counselor.id, COUNT(Participant.id) AS participant_count\nFROM Counselor\nJOIN Participant ON Counselor.id = Participant.counselor_id\nGROUP BY Counselor.id\nORDER BY participant_count DESC\nLIMIT 1;",
      "sql_extracted": "SELECT Counselor.id, COUNT(Participant.id) AS participant_count\nFROM Counselor\nJOIN Participant ON Counselor.id = Participant.counselor_id\nGROUP BY Counselor.id\nORDER BY participant_count DESC\nLIMIT 1;",
      "query_result": [
        {
          "id": 5,
          "participant_count": 6
        }
      ],
      "friendly_response": "Counselor with ID 5 has the most participants assigned, with a total of 6 participants.",
      "error": "None"
    },
    {
      "question": "As a percentage, how many guests have not checked in yet?",
      "sql_raw_response": "```sql\nSELECT \n    (CAST(SUM(CASE WHEN checked_in = 0 THEN 1 ELSE 0 END) AS FLOAT) / COUNT(*)) * 100 AS percentage_not_checked_in\nFROM Guest;\n```",
      "sql_extracted": "SELECT \n    (CAST(SUM(CASE WHEN checked_in = 0 THEN 1 ELSE 0 END) AS FLOAT) / COUNT(*)) * 100 AS percentage_not_checked_in\nFROM Guest;",
      "query_result": [
        {
          "percentage_not_checked_in": 23.52941176470588
        }
      ],
      "friendly_response": "About 23.53% of the guests have not checked in yet.",
      "error": "None"
    },
    {
      "question": "Which people staying in Building 3 were born in July?",
      "sql_raw_response": "SELECT p.*\nFROM Person p\nJOIN Bedspace b ON p.bedspace_id = b.id\nWHERE b.building_id = 3\n  AND strftime('%m', p.birthdate) = '07';",
      "sql_extracted": "SELECT p.*\nFROM Person p\nJOIN Bedspace b ON p.bedspace_id = b.id\nWHERE b.building_id = 3\n  AND strftime('%m', p.birthdate) = '07';",
      "query_result": [
        {
          "id": 2,
          "first_name": "Marcus",
          "last_name": "Delgado",
          "birthdate": "2002-07-22",
          "gender": "M",
          "bedspace_id": 21
        },
        {
          "id": 22,
          "first_name": "Nolan",
          "last_name": "Chambers",
          "birthdate": "2010-07-31",
          "gender": "M",
          "bedspace_id": 16
        }
      ],
      "friendly_response": "Marcus Delgado and Nolan Chambers stay in Building 3 and were born in July.",
      "error": "None"
    },
    {
      "question": "Will anyone be staying in the dorms on their birthday?",
      "sql_raw_response": "```sql\nSELECT EXISTS (\n    SELECT 1\n    FROM Person p\n    JOIN Guest g ON p.id = g.id\n    WHERE g.checked_in = 1\n      AND strftime('%m-%d', p.birthdate) BETWEEN strftime('%m-%d', g.arrival_date) AND strftime('%m-%d', g.departure_date)\n);\n```",
      "sql_extracted": "SELECT EXISTS (\n    SELECT 1\n    FROM Person p\n    JOIN Guest g ON p.id = g.id\n    WHERE g.checked_in = 1\n      AND strftime('%m-%d', p.birthdate) BETWEEN strftime('%m-%d', g.arrival_date) AND strftime('%m-%d', g.departure_date)\n);",
      "query_result": [
        {
          "EXISTS (\n    SELECT 1\n    FROM Person p\n    JOIN Guest g ON p.id = g.id\n    WHERE g.checked_in = 1\n      AND strftime('%m-%d', p.birthdate) BETWEEN strftime('%m-%d', g.arrival_date) AND strftime('%m-%d', g.departure_date)\n)": 1
        }
      ],
      "friendly_response": "Yes, there is at least one person staying in the dorms on their birthday.",
      "error": "None"
    },
    {
      "question": "Who will have a birthday during the FSY 1B session?",
      "sql_raw_response": "```sql\nSELECT p.*\nFROM Person p\nJOIN Guest g ON p.id = g.id\nJOIN Camp c ON g.camp_id = c.id\nWHERE c.name = 'FSY 1B'\n  AND strftime('%m-%d', p.birthdate) BETWEEN strftime('%m-%d', g.arrival_date)\n                                       AND strftime('%m-%d', g.departure_date);\n```",
      "sql_extracted": "SELECT p.*\nFROM Person p\nJOIN Guest g ON p.id = g.id\nJOIN Camp c ON g.camp_id = c.id\nWHERE c.name = 'FSY 1B'\n  AND strftime('%m-%d', p.birthdate) BETWEEN strftime('%m-%d', g.arrival_date)\n                                       AND strftime('%m-%d', g.departure_date);",
      "query_result": [
        {
          "id": 29,
          "first_name": "Cole",
          "last_name": "Haynes",
          "birthdate": "2009-06-24",
          "gender": "M",
          "bedspace_id": 33
        },
        {
          "id": 50,
          "first_name": "Olivia",
          "last_name": "Hudson",
          "birthdate": "2010-06-23",
          "gender": "F",
          "bedspace_id": 48
        }
      ],
      "friendly_response": "Cole Haynes and Olivia Hudson will have birthdays during the FSY 1B session.",
      "error": "None"
    },
    {
      "question": "As a percentage, how many of the FSY 1B camp participants are female?",
      "sql_raw_response": "```sql\nSELECT \n    ROUND(100.0 * SUM(CASE WHEN p.gender = 'F' THEN 1 ELSE 0 END) / COUNT(*), 2) AS female_percentage\nFROM Participant part\nJOIN Guest g ON part.id = g.id\nJOIN Camp c ON g.camp_id = c.id\nJOIN Person p ON g.id = p.id\nWHERE c.name = 'FSY 1B';\n```",
      "sql_extracted": "SELECT \n    ROUND(100.0 * SUM(CASE WHEN p.gender = 'F' THEN 1 ELSE 0 END) / COUNT(*), 2) AS female_percentage\nFROM Participant part\nJOIN Guest g ON part.id = g.id\nJOIN Camp c ON g.camp_id = c.id\nJOIN Person p ON g.id = p.id\nWHERE c.name = 'FSY 1B';",
      "query_result": [
        {
          "female_percentage": 50
        }
      ],
      "friendly_response": "50% of the FSY 1B camp participants are female.",
      "error": "None"
    },
    {
      "question": "How many FSY 1A participants are female?",
      "sql_raw_response": "```sql\nSELECT COUNT(*) \nFROM Participant p\nJOIN Guest g ON p.id = g.id\nJOIN Person pe ON p.id = pe.id\nJOIN Bedspace b ON pe.bedspace_id = b.id\nJOIN Building bd ON b.building_id = bd.id\nWHERE bd.occupant_gender = 'F' AND b.apartment = 1 AND b.room = 1 AND b.bed = 'A';\n```",
      "sql_extracted": "SELECT COUNT(*) \nFROM Participant p\nJOIN Guest g ON p.id = g.id\nJOIN Person pe ON p.id = pe.id\nJOIN Bedspace b ON pe.bedspace_id = b.id\nJOIN Building bd ON b.building_id = bd.id\nWHERE bd.occupant_gender = 'F' AND b.apartment = 1 AND b.room = 1 AND b.bed = 'A';",
      "query_result": [
        {
          "COUNT(*)": 0
        }
      ],
      "friendly_response": "There are no female FSY 1A participants.",
      "error": "None"
    }
  ]
}