{
  "strategy": "single_domain_single_shot",
  "prompt_prefix": "CREATE TABLE Building (\n    id BIGINT PRIMARY KEY,\n    occupant_gender CHAR(1) NOT NULL\n);\n\nCREATE TABLE Bedspace (\n    id BIGINT PRIMARY KEY,\n    building_id BIGINT NOT NULL,\n    apartment SMALLINT NOT NULL,\n    room TINYINT NOT NULL,\n    bed CHAR(1) NOT NULL,\n    FOREIGN KEY (building_id) REFERENCES Building(id)\n);\n\nCREATE TABLE Camp (\n    id BIGINT PRIMARY KEY,\n    name VARCHAR(255) NOT NULL\n);\n\nCREATE TABLE Person (\n    id BIGINT PRIMARY KEY,\n    first_name VARCHAR(255) NOT NULL,\n    last_name VARCHAR(255) NOT NULL,\n    birthdate DATE NOT NULL,\n    gender CHAR(1) NOT NULL,\n    bedspace_id BIGINT NOT NULL,\n    FOREIGN KEY (bedspace_id) REFERENCES Bedspace(id)\n);\n\nCREATE TABLE Employee (\n    id BIGINT PRIMARY KEY,\n    role_type TEXT NOT NULL CHECK (role_type IN ('HA', 'CA')),\n    keyset_id BIGINT NOT NULL,\n    FOREIGN KEY (id) REFERENCES Person(id)\n);\n\nCREATE TABLE Guest (\n    id BIGINT PRIMARY KEY,\n    camp_id BIGINT NOT NULL,\n    arrival_date DATE NOT NULL,\n    departure_date DATE NOT NULL,\n    checked_in INTEGER NOT NULL CHECK (checked_in IN (0, 1)),\n    FOREIGN KEY (id) REFERENCES Person(id),\n    FOREIGN KEY (camp_id) REFERENCES Camp(id)\n);\n\nCREATE TABLE Counselor (\n    id BIGINT PRIMARY KEY,\n    role_type TEXT NOT NULL CHECK (role_type IN ('Counselor', 'Assistant Coordinator', 'Coordinator', 'Medical Coordinator')),\n    FOREIGN KEY (id) REFERENCES Guest(id)\n);\n\nCREATE TABLE Participant (\n    id BIGINT PRIMARY KEY,\n    counselor_id BIGINT NOT NULL,\n    FOREIGN KEY (id) REFERENCES Guest(id),\n    FOREIGN KEY (counselor_id) REFERENCES Counselor(id)\n);\n\n\nExample Question: How many counselors were born in 2002?\nExample SQL Response: SELECT COUNT(*) FROM Person WHERE strftime('%Y', birthdate) = '2002' AND id IN (SELECT id FROM Counselor);",
  "questions": [
    {
      "question": "What is the average age of all people staying in the dorms?",
      "sql_raw_response": "SELECT AVG((julianday('now') - julianday(birthdate)) / 365.25) AS average_age FROM Person;",
      "sql_extracted": "SELECT AVG((julianday('now') - julianday(birthdate)) / 365.25) AS average_age FROM Person;",
      "query_result": [
        {
          "average_age": 19.113035798508268
        }
      ],
      "friendly_response": "The average age of all people staying in the dorms is about 19.11 years.",
      "error": "None"
    },
    {
      "question": "How many participants are participating in FSY 1A?",
      "sql_raw_response": "SELECT COUNT(*) \nFROM Participant p\nJOIN Guest g ON p.id = g.id\nJOIN Camp c ON g.camp_id = c.id\nWHERE c.name = 'FSY 1A';",
      "sql_extracted": "SELECT COUNT(*) \nFROM Participant p\nJOIN Guest g ON p.id = g.id\nJOIN Camp c ON g.camp_id = c.id\nWHERE c.name = 'FSY 1A';",
      "query_result": [
        {
          "COUNT(*)": 24
        }
      ],
      "friendly_response": "There are 24 participants in FSY 1A.",
      "error": "None"
    },
    {
      "question": "In which buildings are medical coordinators housed?",
      "sql_raw_response": "SELECT DISTINCT b.id\nFROM Building b\nJOIN Bedspace bs ON bs.building_id = b.id\nJOIN Person p ON p.bedspace_id = bs.id\nJOIN Guest g ON g.id = p.id\nJOIN Counselor c ON c.id = g.id\nWHERE c.role_type = 'Medical Coordinator';",
      "sql_extracted": "SELECT DISTINCT b.id\nFROM Building b\nJOIN Bedspace bs ON bs.building_id = b.id\nJOIN Person p ON p.bedspace_id = bs.id\nJOIN Guest g ON g.id = p.id\nJOIN Counselor c ON c.id = g.id\nWHERE c.role_type = 'Medical Coordinator';",
      "query_result": [
        {
          "id": 3
        },
        {
          "id": 7
        }
      ],
      "friendly_response": "Medical coordinators are housed in buildings with IDs 3 and 7.",
      "error": "None"
    },
    {
      "question": "What is the most common birth year of male participants?",
      "sql_raw_response": "SELECT strftime('%Y', birthdate) AS birth_year, COUNT(*) AS count\nFROM Person\nWHERE gender = 'M' AND id IN (SELECT id FROM Participant)\nGROUP BY birth_year\nORDER BY count DESC\nLIMIT 1;",
      "sql_extracted": "SELECT strftime('%Y', birthdate) AS birth_year, COUNT(*) AS count\nFROM Person\nWHERE gender = 'M' AND id IN (SELECT id FROM Participant)\nGROUP BY birth_year\nORDER BY count DESC\nLIMIT 1;",
      "query_result": [
        {
          "birth_year": "2011",
          "count": 8
        }
      ],
      "friendly_response": "The most common birth year of male participants is 2011.",
      "error": "None"
    },
    {
      "question": "Which counselors have the most participants assigned to them?",
      "sql_raw_response": "SELECT counselor_id, COUNT(*) AS participant_count\nFROM Participant\nGROUP BY counselor_id\nHAVING participant_count = (\n    SELECT MAX(participant_count)\n    FROM (\n        SELECT counselor_id, COUNT(*) AS participant_count\n        FROM Participant\n        GROUP BY counselor_id\n    )\n);",
      "sql_extracted": "SELECT counselor_id, COUNT(*) AS participant_count\nFROM Participant\nGROUP BY counselor_id\nHAVING participant_count = (\n    SELECT MAX(participant_count)\n    FROM (\n        SELECT counselor_id, COUNT(*) AS participant_count\n        FROM Participant\n        GROUP BY counselor_id\n    )\n);",
      "query_result": [
        {
          "counselor_id": 5,
          "participant_count": 6
        }
      ],
      "friendly_response": "Counselor with ID 5 has the most participants assigned, with a total of 6 participants.",
      "error": "None"
    },
    {
      "question": "As a percentage, how many guests have not checked in yet?",
      "sql_raw_response": "SELECT \n    100.0 * SUM(CASE WHEN checked_in = 0 THEN 1 ELSE 0 END) / COUNT(*) AS percentage_not_checked_in\nFROM Guest;",
      "sql_extracted": "SELECT \n    100.0 * SUM(CASE WHEN checked_in = 0 THEN 1 ELSE 0 END) / COUNT(*) AS percentage_not_checked_in\nFROM Guest;",
      "query_result": [
        {
          "percentage_not_checked_in": 23.529411764705884
        }
      ],
      "friendly_response": "About 23.53% of guests have not checked in yet.",
      "error": "None"
    },
    {
      "question": "Which people staying in Building 3 were born in July?",
      "sql_raw_response": "SELECT * FROM Person WHERE id IN (\n    SELECT bedspace_id FROM Bedspace WHERE building_id = 3\n) AND strftime('%m', birthdate) = '07';",
      "sql_extracted": "SELECT * FROM Person WHERE id IN (\n    SELECT bedspace_id FROM Bedspace WHERE building_id = 3\n) AND strftime('%m', birthdate) = '07';",
      "query_result": [],
      "friendly_response": "No one staying in Building 3 was born in July.",
      "error": "None"
    },
    {
      "question": "Will anyone be staying in the dorms on their birthday?",
      "sql_raw_response": "SELECT EXISTS (\n    SELECT 1\n    FROM Guest g\n    JOIN Person p ON g.id = p.id\n    JOIN Bedspace b ON p.bedspace_id = b.id\n    JOIN Building building ON b.building_id = building.id\n    WHERE p.birthdate BETWEEN g.arrival_date AND g.departure_date\n);",
      "sql_extracted": "SELECT EXISTS (\n    SELECT 1\n    FROM Guest g\n    JOIN Person p ON g.id = p.id\n    JOIN Bedspace b ON p.bedspace_id = b.id\n    JOIN Building building ON b.building_id = building.id\n    WHERE p.birthdate BETWEEN g.arrival_date AND g.departure_date\n);",
      "query_result": [
        {
          "EXISTS (\n    SELECT 1\n    FROM Guest g\n    JOIN Person p ON g.id = p.id\n    JOIN Bedspace b ON p.bedspace_id = b.id\n    JOIN Building building ON b.building_id = building.id\n    WHERE p.birthdate BETWEEN g.arrival_date AND g.departure_date\n)": 0
        }
      ],
      "friendly_response": "No, no one will be staying in the dorms on their birthday.",
      "error": "None"
    },
    {
      "question": "As a percentage, how many FSY 1B participants are female?",
      "sql_raw_response": "SELECT \n    100.0 * SUM(CASE WHEN p.gender = 'F' THEN 1 ELSE 0 END) / COUNT(*) AS female_percentage\nFROM Participant part\nJOIN Guest g ON part.id = g.id\nJOIN Person p ON p.id = g.id\nJOIN Bedspace b ON p.bedspace_id = b.id\nWHERE b.apartment = 1 AND b.room = 2;",
      "sql_extracted": "SELECT \n    100.0 * SUM(CASE WHEN p.gender = 'F' THEN 1 ELSE 0 END) / COUNT(*) AS female_percentage\nFROM Participant part\nJOIN Guest g ON part.id = g.id\nJOIN Person p ON p.id = g.id\nJOIN Bedspace b ON p.bedspace_id = b.id\nWHERE b.apartment = 1 AND b.room = 2;",
      "query_result": [
        {
          "female_percentage": null
        }
      ],
      "friendly_response": "The percentage of female FSY 1B participants is not available (null) from the data provided.",
      "error": "None"
    }
  ]
}